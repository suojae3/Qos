---


![[Pasted image 20231011182704.png|400]]
- 큐의 종류에는 가장 크게 두종류, 디스패치큐와 오퍼레이션 큐로 나뉘어진다.
- 디스패치큐는 다시 세가지로 나누어진다 - 메인, 글로벌, 프라이빗


---

---

![[Pasted image 20231011182901.png|400]]

- 대기열마다 특성이 달라서 작업의 특성과 큐의 특성에 맞게 작업을 할당한다
- 작업을 큐(대기열)에만 할당하면 각 큐가 자동적으로 스레드를 만들어서 작업을 병렬처리해버린다.

---
---

![[Pasted image 20231011183102.png|400]]
- 메인큐는 디스패치큐의 한 종류
- 유일한 한 개이며 직렬로 동작한다 이는 메인 스레드를 의미

---
---

![[Pasted image 20231011183318.png|400]]
- 위코드의 의미는 작업을 메인스레드로, 비동기적으로 보낸다.
- 디폴트값이 메인스레드이기 때문에 단순히 프린트를 하더라도 사실 디스패치메인큐 코드로 감싸있는 것과 같다.

---

![[Pasted image 20231011183512.png|400]]

- 이 코드의 의미는 메인큐로 비동기적으로 보낸다
- 보낼건데 지금으으로부터 2초뒤에 메인스레드로 작업을 보낼거야라는 의미

---
---

![[Pasted image 20231011183752.png|400]]
- 글로벌 큐는 서비스품질(Quality Of Service)에 따라 6가지로 나누어진다.
- 디폴트 설정은 Concurrent로 기본적으로 무조건 여러개 쓰레드로 작업을 분산처리하는 큐이다.
- 따라서 순서가 중요하지 않은 작업을 글로벌 큐에 할당해야한다.
---
---

![[Pasted image 20231011184111.png|450]]
- 글로벌 큐는 위와같이 중요도(위가 가장중요) 순서로 배열할 수 있다.
-  작업의 종류에 따라 글로벌 큐의 종류를 다르게하여 코드를 작성한다. 
---
---
![[Pasted image 20231011184650.png|600]]

---
---

  ![[Pasted image 20231011184804.png|400]]
  ![[Pasted image 20231011184823.png|400]]
---
---


![[Pasted image 20231011185021.png|400]]

![[Pasted image 20231011185006.png|400]]
- 글로벌 큐가 동작하는 방식의 요약은 우선순위가 높은 일에 iOS가 더 여러개의 스레드를 배치하고 배터리를 더 집중해서 사용하도록 동작시킨다는것!

---

![[Pasted image 20231011185442.png|400]]
![[Pasted image 20231011185459.png|400]]
- 만약 작업을 보낼 때 객체의 서비스 품질과 보내는 글로벌 큐의 품질을 더 높여서 보내면 미리 설정해둔 객체의 서비스 품질을 보내는 글로벌 큐의 품질에 맞추어 높여서 보낸다.

---
---
![[Pasted image 20231011185641.png|400]]
- 커스텀큐(프라이빗 큐)의 디폴트 설정은 직렬이다.
- 메인큐와 다르게 원한다면 Concurrent, Qos설정이 가능하다.
---
---
![[Pasted image 20231011185827.png|400]]
- 커스텀 큐 생성방법은 디스패치 큐와 레이블을 붙이는 방식이다.
- 만약에 다른 큐로 보내고 싶다면 Concurrent를 넣어준다.

---
---

```Swift
func task1() {
	print("Task 1 시작")
	sleep(2)
	print("Task 1 완료")
}

//timeCheck1
timeCheck {
	task1()		   
}

//메인큐
let mainQueue = DispatchQueue.main

//timeCheck2 -> 에러발생
timeChck {
	mainQueue.sync {
		task1
	}
}
```

- timeCheck1, 2 코드는 의미상 같다.
- 하지만 timeCheck2는 에러발생


---
---

![[Pasted image 20231011190759.png|500]]
- 동시큐의 경우 여러개의 스레드를 생성해서 작업을 함으로서 어떤 작업이 먼저 마쳐진다고 장담할 수 없음
- 다만 서비스 품질이 높게 보내진 큐가 먼저 처리되기는함

<br/>

![[Pasted image 20231011214744.png|400]]
- 프라이빗 큐의 디폴트값은 직렬이기 때문에 순서대로 작업이 이루어져서 작업 순서 예상 가능
 
---
---

![[Pasted image 20231011215035.png|600]]
